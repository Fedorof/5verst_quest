


main = () => `


Александр Фёдоров


Пять вёрст

Лицензия Creative Commons

«Attribution» («Атрибуция») 3.0

Непортированная.

[Играть](#вступление)

[Советы](#советы)

[Примечания (спойлеры!)](#примечания)
`;



советы = () => `
Несколько советов к игре:

1. Чтобы сохраниться, выберите пункт "Сохранить" в
меню "Инвентарь" (верхний левый угол).

2. Когда надо будет вводить ответ с клавиатуры, нажмите
клавишу <Enter> чтобы подтвердить ответ, или <Esc> чтобы прервать
ввод.

3. Ещё по поводу ввода с клавиатуры: если русские буквы
воспринимаются некорректно (такое бывает на некоторых компьютерах),
печатайте в английской раскладке ﻿— буквы
будут восприниматься как русские. Чтобы стереть неправильно
набранную букву, нажмите <Backspace>.

[Назад](#main)
`;



примечания = () => `
Осторожно! В этом тексте есть спойлеры! Если Вы еще
не прошли игру, дальше лучше не читать.


Мифические персонажи рассказа ﻿— сочетание материалов из
энциклопедий и из повести М. Коцюбинского "Тени забытых
предков" плюс личные наблюдения и обобщения. Тем не менее,
ради сюжета пришлось немного соврать:

1. Жабой скорее могла б оказаться ведьма а не чертица. Однако
на ведьму веретено бы не подействовало, ведь она не относится
к так называемым "низким духам".

2. Водяной вряд ли стал бы загадывать загадки ﻿— это больше
подходит озорным духам, таким как нявки и лешие.

3. Против нечисти помогает не только веретено, но и другие
предметы труда: топор, нож, батог. Причем они
действуют и на добрых духов, таких как домовой и Чугайстер.

4. Опырь = упырь. Не путать с вампирами, вурдалаками и графом
Дракулой.

5. Домовой не так легко идёт на контакт и не настолько
разговорчив.

[Назад](#main)
`;



вступление = () => `
﻿— А вот ещё была история, ﻿— говорит старый казак.

Он подносит люльку к зубам и его обветренное лицо скрывается
за клубами дыма. Парубки пододвигаются ближе, старик заметил, как
загорелись их глаза.

Пламя костра греет старые казацкие кости, а живой интерес
согревает душу.


﻿— Так вот, ﻿— произносит казак. ﻿— Давным-давно молодой джура ﻿— а был он
 помоложе вас ﻿— возвращался на Сечь с Луга. Но, сказать надо, был это не
 простой парубок, ведь учился он на характерника.

[Дальше](#вступление1)
`;



вступление1 = () => `
До Сечи оставалось вёрст пять, когда застала парубка глупая ночь. Благо, на
пути попался посёлок и джура попросился на ночлег в крайнюю хату.

Вот спит он и видит сон: прилетает во двор чёрный ворон и ходит по двору.
Каркнул раз ﻿— и прислушивается. Каркнул второй ﻿— снова молчит, чёрными
глазками-бусинками по сторонам смотрит. Каркнул третий раз ﻿— и улетел.


Просыпается юноша, а в ушах ещё хлопанье крыльев звучит. Понял, что его
наставник-характерник весточку прислал дурную. Была бы добрая, белым
голубем бы явилась весточка, а раз ворон, то собираться надо и как можно
скорее идти на Сечь.

[Дальше](#начало)
`;



начало = () => `
Тихо, чтоб не разбудить хозяев, поднимется с постели. Под ногами чуть
скрипнула половица, протяжный вой послышался со двора, за окном Мара
позвала джуру по имени.

Без единого звука парубок подбирается к двери. Снова Мара подаёт голос.
Парень не отзывается ﻿— скоро ей надоест и она дальше пойдёт ﻿— звать,
да подстерегать тех, кто откликнется.

Парубок приоткрывает дверь, на пол ложится яркая полоска лунного света.
 В небе светит полная луна ﻿— солнце всей нечисти и мертвецов.

Юноша выходит из хаты, сапоги ступают на примятый ковыль. Парень тихо
 закрывает дверь, взгляд поднимается к небу. Полная луна... Ох, не к добру!

[Вперёд](#двор)
`;



двор = () => `
домовой0 = "слышится протяжный вой"
домовой1 = "доносится тихий вой домового"
домовой2 = "слышен довольный смех домового"
домовой3 = домовой2

Крайний двор села.


В хате тихо, хозяева с детьми мирно спят. Из стойла
 #%домовой#статус_домовой$$, время от времени фыркает конь.
if not двор_был then
За селом журчит речка, лунный свет блестит в ее водах. Тропинка тянется
 вдоль речки и упирается в лес, слышно как шелестят листья и ветер шумит в
 кронах.
&
Тропинка должна привести на Сечь, вот только луна полная, а это значит,
что всякая нечисть вылезает на свет Божий, опасно ходить ночью без оглядки.
& двор_был = 1
else
За селом журчит речка, вдоль берега к лесу тянется тропинка.

[Идти по тропинке](#тропинка#статус_нявка$)

[Зайти в стойло](#стойло#статус_домовой$)
`;



стойло0 = () => `
статус_домовой = 1

 У стены спит корова, поодаль в ясли уткнулся конь.

Парубок входит в стойло, конь лениво оборачивается на звук его
 шагов, корова встаёт на ноги.

На яслях стоит маленький дедок ﻿— с вершок ростом, не больше, седая борода
стелется по земле, рука сжимает гребешок. Дедок нежно поглаживает шею коня,
гребешок то и дело скользит по пышной конской гриве.

Вот, значит, кто завывает в стойле! Домовой за скотиной ухаживает да
грустит-кручинится.

[Говорить с домовым](#стойло_говорить)

[Выйти](#двор)
`;



стойло = () => `
действие1 = "Домовой же ему гриву расчёсывает."
действие2 = "Домовой старательно расчёсывает конский хвост."
действие3 = "Домовой подкладывает коню травы да приговаривает:
     ''Кушай, кушай, родимый.''"
действие4 = "Домовой взял ведро и подливает воду в поилку."
действие5 = "Домовой взялся за вилы и подгребает солому."
действие6 = "Домовой собрал конский волос ﻿— сидит, помазки вяжет."
действие7 = "Домовой шуршит, стучит. Хоть самого не видно, но слышно,
     что работает."
действие8 = "Домовой взял жёсткую щётку и чешет корове бока."
действие9 = "Домовой натирает ветошью коровьи рога."

Корова стоит у стенки, конь неспешно тянет овёс из яслей.
#%действие#rnd9$$


стойло_кнопки = () => `
if статус_нявка=3 then
[Спросить о девицах](#домовой_девицы)
if загадка and not count_домовой_загадка then
[Спросить о загадке](#домовой_загадка)
if статус_нявка=1 and count_стойло_говорить and not count_домовой_нявка then
[Спросить о нявке](#домовой_нявка)

`;



домовой_нявка = () => `
﻿— Дедушка домовой, ﻿— говорит парубок, ﻿— научи, как нявку обойти.

А домовой говорит:

﻿— Она нявка ﻿— не тревога. Хуже, если нявок много. Если повадки их
знаешь, одна тебе не страшна, но если нет ﻿— утащит тебя нявка!
if статус_домовой < 2 then
 ﻿— Помог бы ты мне, ﻿— добавляет, ﻿— может и научился
   бы чему. Заодно и силу бы свою проверил: можешь ли с нявкой тягаться?
else
 ﻿— Но ты, ﻿— добавляет, ﻿— жабу-коровницу сборол, а нявку уж
 победить сумеешь!

[Дальше](#стойло#статус_домовой$)
`;



домовой_девицы = () => `
статус_нявка = 4
﻿— Дедушка домовой! ﻿— говорит джура. ﻿— Не знаешь ли, что за девицы
сидят на бережку? И одеты, и косы заплетены...

﻿— Так то ж берегини! ﻿— говорит домовой. ﻿— Где опырь не властвует,
там берегини хозяйничают. Честным людям их нечего бояться: они и
помогут, и от напасти защитят.

[Дальше](#стойло#статус_домовой$)
`;



домовой_загадка = () => `
if статус_нявка<4 then статус_нявка = 4

﻿— Дедушка домовой! ﻿— говорит джура. ﻿— А не знаешь ли ты отгадки на
загадку:
proc _question

﻿— Кто ж тебе такую загадку задал? ﻿— спрашивает домовой.

﻿— Водяной, ﻿— говорит джура, ﻿— иначе грозится через брод
не пустить.

﻿— Тогда не меня спрашивай, ﻿— говорит домовой. ﻿— Там, у речки,
берегини сидят ﻿— у них помощи проси. Честных людей они всегда выручают.

[Дальше](#стойло#статус_домовой$)
`;



стойло1 = () => `
proc стойло

if count_стойло_говорить then
[Предложить помощь](#стойло_согласиться)
else
[Говорить с домовым](#стойло_говорить)

[Выйти](#двор)
`;



стойло2 = () => `
Домовой сидит на скамье, в руках у него чересседельная сумка. На
сумке красуются диковинные звери и причудливые узоры. Домовой натирает
ветошью золотистый замочек.

[Спросить о сумке](#сумка)
proc стойло_кнопки
[Выйти](#двор)
`;



сумка = () => `
статус_домовой = 3
﻿— А что это за сумка такая? ﻿— спрашивает джура.

﻿— Тут один летописец приехал из греков, ﻿— говорит домовой, ﻿— все
басни рассказывал о химерах всяких и гигантах. Тут замок хитрый
на сумке, а летописец забыл, как его открыть. Говорил, ключ от
сумки такой же, как от истории, в которой фараонова крыса
убила гиганта.

 Домовой кладёт сумку на скамью и возвращается к хозяйству.

[Дальше](#стойло#статус_домовой$)
`;



_сумка_замок = () => `
cls
 #%text$

 [#slot2$#slot1$#slot0$]

`;



сумка_замок = () => `
; 042 ответ на вопрос твой, юный падаван.
; Но это не тот код, что ты ищешь.

text = " Как говорил домовой, ключ от сумки такой же, как от истории,
в которой фараонова крыса убила гиганта.#/$
 Похоже на хитрый замок, циферками можно число набрать:#/$"


res = 0
i = 0
limit = offset + rrange

map0 = 1
map1 = limit
map2 = limit * limit



замок_loop = () => `
  proc _сумка_замок
  if not сумка_подсказка then
    (Можно нажать клавиши 0, 1, 2, ..., 9, а также Enter и Esc)
   & сумка_подсказка = 1
  anykey _res
  if _res = 27 then goto стойло3
  if _res >= offset and _res < limit then
    slot2 = slot1
   & slot1 = slot0
   & slot0 = _res ﻿— offset
   & res = _res * map#i$ + res
   & i = 1 + i
if i < 3 and _res<>13 then goto замок_loop

proc _сумка_замок
if res = np1 or (res = np2 and not slot2) or (100*slot2 + 10*slot1 + slot0) = 42 then
cls
& goto сумка_открыта
else
Не открывается.

[Заново](#сумка_замок)

[Закончить](#стойло#статус_домовой$)

[Выйти](#двор)
`;



сумка_открыта = () => `
открыл_сумку = 1
Джура открывает сумку. На дне лежат бамаги да пергамент. На
верхней бамаге написаны строчки:
Старик говорит: "Посмотри-ка вперёд!

Там липа в степи одиноко растёт.
Сухие коренья торчат из земли,

Кора на стволе превратилась в угли,
С пожара прошло уже несколько лет,

А листьев на ветках по-прежнему нет.
В народе о дереве том говорят,

Что где-то под ним есть неслыханный клад,
Найти его люди пытались давно,

Да, видно, не каждому то суждено..."
Степь, клад, дерево... Наверное, это совсем другая история.

[Вернуть сумку на место](#стойло#статус_домовой$)
`;



стойло3 = () => `
proc стойло
На скамье лежит чересседельная сумка с диковинным замком.
if открыл_сумку then
[Открыть сумку](#сумка_открыта)
else
[Открыть сумку](#сумка_замок)

[Выйти](#двор)
`;



стойло_говорить = () => `
﻿— Здравствуй, дедушка, ﻿— произносит парубок. ﻿— О чем печалишься?

﻿— Да вот, ﻿— произносит домовик, ﻿— пришла беда, отворяй ворота.
Жаба-коровница сегодня приползёт коровье молоко пить, совсем бедную
скотину сгубит. А без коровы хозяин с хозяюшкой бедствовать будут...
Как им помочь? Вот ты ﻿— ты же казацкого роду, из характерников?
Помоги хозяйство уберечь, а?

[Отказаться](#стойло_отказаться)

[Согласиться](#стойло_согласиться)
`;



стойло_отказаться = () => `
﻿— Некогда мне, дедушка, ﻿— произносит парубок, ﻿— весточку получил
недобрую, на Сечь спешу.

﻿— Эх ты! ﻿— произносит домовой. ﻿— Разве не знаешь, что люди говорят?
Кто долго запрягает, тот быстро едет.

[Дальше](#стойло#статус_домовой$)
`;



стойло_согласиться = () => `
статус_домовой = 2
﻿— Так и быть, ﻿— произносит парубок, ﻿— помогу тебе, хозяин. Говори, что
делать?

Домовой как услыхал, к парубку подскочил, в ладоши хлопает, смеётся -
как дитя малое.

﻿— Пойди, ﻿— говорит, ﻿— под крышей веретено возьми ﻿— я ещё днем заприметил,
как хозяюшка его туда засунула. А потом приходи, спрячься за ясли. Да
не мешкай, жаба вот-вот объявится!


Все сделал джура, что домовой советовал ﻿— взял веретено, присел за яслями,
ждёт...

[Дальше](#стойло_жаба)
`;



стойло_жаба = () => `
Не успел спрятаться, слышит ﻿— топает что-то за тыном, на перелаз
навалилось ﻿— большое, чёрное. Аж тын затрещал. Хлоп ﻿— ввалилось во
двор. Смотрит парубок ﻿— а то здоровенная ропуха, глазищи как блюдца,
так и зыркают по сторонам, сама ж как телёнок размером.

Глянула жаба влево, вправо, а парубок сидит, не дышит ﻿— и как с такой
громадиной биться, да ещё и веретеном? Хоть и слышал от наставника, что
веретено каждый день в работе, трудом да руками людскими освящено,
да не верит, что жаба его убоится.

[Дальше](#стойло_жаба0)
`;



стойло_жаба0 = () => `
А жаба прямо в стойло прыгает ﻿— знает, вражина, где бедную говядку
держат. Парень ждёт, уже в нос болотным смрадом ударило, уже ропуха
так близко, что вот-вот сама джуру учует...

Выждал парень, да как ударит жабу веретеном! А та кувыркнулась -
и во двор отлетела. Выходит джура, смотрит ﻿— жабы нет, а посреди
двора старуха лежит, дух испускает. Сообразил тут парень, что не
жабу ﻿— чертицу в жабьей личине веретеном стукнул.

﻿— Ох, ﻿— говорит старуха, ﻿— ударь ещё раз!

[Дальше](#стойло_жаба1)
`;



стойло_жаба1 = () => `
 Тут старый казак прервался.

﻿— Что думаете, братья? Стоит ли джуре добить нечистую, али так
оставить?

[Добить](#жаба_добить)

[Оставить](#жаба_оставить)
`;



жаба_добить = () => `
﻿— Добить, ﻿— загудели парубки, ﻿— добить вражину!

﻿— Вот и джура так решил, ﻿— произносит старик. ﻿— Нет бы ﻿— подумать: с чего
это чертице самой просить, чтоб джура её ударил? А затем, что второй удар
первый отменяет. Снова ударил её джура, так она и
набросилась на парубка. Наутро даже косточек не нашли...

Старик переворачивает люльку, сизый пепел ложится под ноги. Казак
поднимается, старческие суставы хрустят, словно сухие ветки.

﻿— Постойте, ﻿— произносит один из парубков, ﻿— неужто так все и было?

﻿— Может быть так, а может и по-другому, ﻿— произносит старик. ﻿— А вам -
наука: есть булава ﻿— к ней нужна и голова.

`;



жаба_оставить = () => `
﻿— Оставить, ﻿— говорят парубки, ﻿— пусть сама доходит.

﻿— Конечно, оставить! ﻿— произносит казак. ﻿— С чего бы ей просить второго удара?
Парубок сразу понял: ударит ещё раз, так ему, а не старухе, конец придёт.
Ведь второй удар отменяет предыдущий.

[Дальше](#жаба_оставить1)
`;



жаба_оставить1 = () => `
 Не стал джура старуху добивать, она и сгинула.

 Подскочил тут домовой, в руки плещет, пританцовывает.

﻿— Ну, удружил! ﻿— говорит. ﻿— Спасибо, казаче! А то ишь, нечистые
распоясались! Пока старый опырь был жив, на деревне тишь да гладь
была, а как помер, начал козни строить ﻿— всяка нечисть средь бела дня
во двор лезет, лесная так прям в окна заглядывает. А новый опырь только
явился, не может он старого приструнить.

[Дальше](#жаба_оставить2)
`;



жаба_оставить2 = () => `
﻿— Так что ступай осторожно, ﻿— продолжает домовой. ﻿— Вдоль речки не иди -
у берега на лесной поляне нявки гуляют, хороводы водят. Попадёшь к ним
в лапы ﻿— косточек не сосчитаешь. За поляной брод есть, но ты не прямо к нему
ступай, а через лес ﻿— так-то поспокойнее.

Поклонился джура домовому.
﻿— Спасибо тебе, дедушка.

﻿— Да что там, тебе спасибо!

Засмеялся домовой и к хозяйству своему вернулся ﻿— идёт, песни насвистывает.
А домовые-то любят свистеть! Не зря старые люди говорят: не свисти в доме -
домовой решит, что передразниваешь, и обидится.

[Дальше](#двор)
`;

; Вне двора ------------------------------------------------------------------


тропинка0 = () => `
Джура ступает на тропинку. Луна светит над головой, тихо журчит речка.
В ярком лунном свете дорогу видно, словно днем.

Слышен плеск волн, посреди речки появляются две тени. Ба, да то речные
черти! Как заправские всадники восседают они на здоровенных сомах##59$
сказано же ﻿— не рыба, а чёртов конь.

Черти подплывают к небольшому островку, их руки держат сомьи усы, как
удила. Повинуясь всадникам, сомы круто поворачивают и уходят под воду
вместе с чертями, крупные волны бьют о берег.

 Ещё миг ﻿— и речка становится спокойной.

[Дальше](#тропинка_нявка)
`;



тропинка_нявка = () => `
статус_нявка = 1
нявка = "девица"
Не успел джура пройти и пары шагов, как послышался звонкий смех. На
берегу появляется девичья фигура ﻿— простоволосая, нагая, волосы распущены,
как у кабацкой девки.

Джура ей:
﻿— Ты кто?!

А та его передразнивает:
﻿— Ты кто! Ты кто? Ты кто!

Знай себе, кривляется, да к нему подбирается. А за нею ﻿— ни следов,
ни тени...

[Продолжить путь](#тропинка_нявка0)

[Вернуться](#тропинка_двор)
`;



тропинка_двор = () => `
 Прикинул в уме джура, что да как, да и развернулся ко двору.

Смотрит краем глаза ﻿— девица за ним бежит. Джура быстрее, а она
не отстаёт. Да так припустилась, что и на коне не обгонишь.

Прыгнул джура через перелаз, оборачивается ﻿— а девицы словно и не было.
Побоялась, видать, во владения домового лезть.

Тут понял джура, что не девица то была, а нявка.
нявка = "нявка"
[Дальше](#двор)
`;



тропинка1 = () => `
Выходит парубок на тропинку, а нявка уже его поджидает, смеётся да
кривляется.

﻿— Иди сюда, ﻿— говорит. ﻿— Дай обнять за шею ﻿— я тебя согрею!
 Идёт, а из волос вода на землю льётся.

[Продолжить путь](#тропинка_нявка0)

[Вернуться](#двор)
`;



тропинка_нявка0 = () => `
 Ступил джура ещё шаг, а #%нявка$ к нему подбегает, да как схватит!

﻿— Укроп или петрушка?! ﻿— говорит.

p Чувствует джура ﻿— не вырваться.
if count_тропинка1 then
else
Понял, что не к кому-нибудь, а к нявке в лапы попал.

[Укроп](#укроп)

[Петрушка](#петрушка)
if статус_домовой > 1 then [Веретено](#веретено)
`;



петрушка = () => `
﻿— Петрушка! ﻿— произносит джура.

﻿— Ах ты моя душка! ﻿— говорит нявка.
Тут-то понял джура, что не те слова сказал...

[..](#петрушка_конец)
`;



петрушка_конец = () => `
 Старый казак хмурит взгляд ﻿— слишком короткая вышла история.

﻿— Не дошел джура до Сечи, ﻿— говорит он, ﻿— защекотала
нявка до смерти. Дорога-дорогой, а слова народные помнить надо:
укропом и полынью издревле нечистую силу прогоняли.

Старик поднимается, в свете костра его морщины кажутся ещё глубже.
Казак кланяется к земле.

﻿— Спасибо вам, пановэ, хорошие вы слушатели.
﻿— Постойте, ﻿— произносит один из парубков. ﻿— Разве так все было?

﻿— Может и так, ﻿— говорит старик, ﻿— а может и по-другому. А для вас -
наука: не знаешь броду ﻿— не лезь в воду.

`;



укроп = () => `
﻿— Укроп! ﻿— говорит джура.

Тут-то нявка скривилась, хватка её ослабла. Джура и моргнуть не успел,
как убежала она ﻿— да так быстро, что и конь бы не угнался.

Лишь у берега обернулась.
﻿— Да чтоб ты утоп! ﻿— кричит.

 Миг ﻿— и скрылась в воде.

[Дальше](#тропинка_нявки)
`;



веретено = () => `
﻿— А вот что, ﻿— говорит джура.

 Да как ткнёт её веретеном, нявка и сгинула ﻿— лишь мокрое место осталось.

[Дальше](#тропинка_нявки)
`;



тропинка_нявки = () => `
статус_нявка = 2
 Подходит юноша к лесу.

Речка здесь выгибается, ведёт круто в сторону, и тропинка вслед за ней.
А джуре-то прямо надо!

Будто того мало, на поляне, что у речки, нявки собрались. Которые хороводы
водят да песни поют, другие по деревьям на ветках сидят, волосы
расчёсывают ﻿— вода так и льётся. А иные цветы собирают да венки плетут.

Мелькнула у джуры мысль, что такие набросятся ﻿— не спросят и как звали!

[На поляну](#нявки)

[Вернуться во двор](#двор)
if статус_домовой>1 then [В лес](#лес#статус_лес$)
`;



нявки = () => `
 Ступает джура на поляну, так нявки тут же дела свои забросили.

﻿— Фи, ﻿— говорит одна, ﻿— живыми, что-ли, запахло?

﻿— Да нет, ﻿— говорит вторая, ﻿— то парубок не мылся давно. Давайте его в воду
окунем, пусть покиснет!

﻿— Лучше давайте его пощекочем, ﻿— говорит третья. ﻿— Засмеётся -
живой. А когда смеяться перестанет ﻿— не живой, значит...

[..](#нявки0)
`;



нявки0 = () => `
 Старый казак хмурится ﻿— не в ту степь история зашла, а поворачивать поздно.

﻿— Набросились на него нявки, ﻿— говорит, ﻿— разорвали.
Так и не дождались на Сечи парубка.

 Старик поднимает взгляд, отсвет костра блеснул искорками в его глазах.

﻿— Однако я засиделся, ﻿— говорит он. ﻿— Байки-байками, но пора бы и
к ночлегу идти.

﻿— Стойте-стойте! ﻿— говорит один из парубков. ﻿— И что, все действительно так
было?

﻿— Может и так, а может и по-другому, ﻿— произносит казак. ﻿— А вам ﻿— наука:
не иди на глубокое, если на мелком тонешь.

`;



тропинка2 = () => `
Тропинка идёт через поляну, где нявки водят хороводы. Туда бы джуре и
пойти, да не терпят лоскотухи живых.

[На поляну](#нявки)

[Вернуться во двор](#двор)
if статус_домовой>1 then [В лес](#лес#статус_лес$)
`;



_btn_поляна = () => `
if not count_чугайстер_танцевать then
[Вернуться во двор](#двор)
if count_чугайстер_танцевать and not count_устал_двор then
[Вернуться во двор](#устал_двор)
if статус_берегини then
[К берегиням](#берегини1)
else
[К девицам](#берегини0)

[К броду](#брод#статус_брод$)
`;



тропинка3 = () => `
На поляне, что у речки, тихо и спокойно ﻿— ни следа от нявок. Ну, они-то
следов никогда не оставляют.

Дальше на бережку сидят три девицы. На нявок не похожи: одеты в
сорочки-вышиванки, волосы в косы заплетены. Сидят, венки плетут да беседу
ведут.

proc _btn_поляна
`;



тропинка4 = () => `
статус_берегини = 1
Тропинка идёт меж лесом и речкой. На бережку сидят берегини да тихо
беседуют.

if not count_брод then
где_то_дальше = "Где-то дальше должен быть брод"
else
где_то_дальше = "Дальше ﻿— брод и водяной"

#%где_то_дальше$. Осталось речку перейти, а там до
Сечи рукой подать.

proc _btn_поляна
`;



устал_двор = () => `
Глянул джура на тропинку, что тянется к селу, и такой она ему длинной
показалась! Ноги-то устали от танцев. Тут бы хоть до Сечи дотопать, а если
в село идти, да назад ﻿— никаких сил не хватит!
proc _btn_поляна
`;



берегини0 = () => `
 Подходит парубок к девицам.

﻿— Здравствуйте, сестры, ﻿— говорит. ﻿— Нету здесь нявок?
﻿— И тебе доброго здоровячка, ﻿— говорит одна девица.

﻿— Нету нявок, ﻿— произносит вторая. ﻿— Тех, что на поляне были, Чугайстер
разогнал. А которые убежать не успели, тех разорвал на кусочки.

﻿— А тут, на нашем бережку, ﻿— говорит третья, ﻿— нявок отродясь не было.

[Дальше](#берегини_говорить)
`;



берегини_говорить = () => `
статус_нявка = 4
﻿— А кто ж вы такие? ﻿— говорит джура.

﻿— Не признал, что ли? Берегини мы! ﻿— произносит первая.

﻿— На берегу сидим, чтоб таких, как ты, из воды вытаскивать, ﻿— говорит
вторая.

﻿— Под селом ﻿— вотчина опырей, а здесь наши земли начинаются, -
произносит третья.

Тут парубок поклонился им.
﻿— Мир вам, берегини!

﻿— И тебе, ﻿— говорят, ﻿— джура, ученик характерника. Удачи тебе в пути.

[Дальше](#тропинка4)
`;



берегини1 = () => `
 Подходит парубок к берегиням, кланяется.

﻿— Мир вам, берегини!
 А те ему кивают.

﻿— И тебе, джура, ученик характерника, ﻿— говорят.
if загадка and not count_берегини_загадка then
[Спросить о загадке](#берегини_загадка)

[Дальше](#тропинка4)
`;



берегини_загадка = () => `
﻿— Сестры берегини! ﻿— говорит джура. ﻿— Помогите, пожалуйста, загадку
разгадать:
proc _question

﻿— Что это ты вздумал загадки разгадывать? ﻿— говорит одна берегиня.

﻿— Это мне водяной загадал, ﻿— произносит парубок, ﻿— чтоб разрешил
через брод перейти.

﻿— Иди назад к водяному, ﻿— молвит другая берегиня, ﻿— и скажи, что если
не будет честных людей через брод пускать, мы ему все омуты
илом засыплем, все сети его порвём, отару его водную в Днепр уведём!

﻿— Так и передай, ﻿— добавляет третья.

if not count_чугайстер_танцевать then
[Вернуться во двор](#двор)
if count_чугайстер_танцевать and not count_устал_двор then
[Вернуться во двор](#устал_двор)

[Назад к броду](#брод#статус_брод$)
`;

; Лес ------------------------------------------------------------------------


лес0 = () => `
статус_лес = 1
 Заходит, значит, джура в лес.

Слышно, как по лесу бродит невидимая секира, стучит по деревьям да
тяжело дышит от усталости.

Ветер поднимается, шумят листья, огромная тень шагает за деревьями ﻿— да
такая высокая, что достаёт до верхушек деревьев.
Это лесовик пасёт зверьё да владения осматривает. Вот деревья
пошли ниже, и тень чуть осела.

[Назад](#тропинка2)

[Дальше](#лес1)
`;



лес1 = () => `
статус_лес = 2
статус_нявка = 3
чугайстер_просьба = "на Сечь спешу, ﻿— говорит джура, ﻿— да только нявки не пускают.#/$
  ﻿— Где ш ты нявок нашёл? ﻿— произносит Чугайстер.#/$
  ﻿— На поляне у речки...#/$
  ﻿— Ну так штупай шледом, ﻿— говорит Чугайстер. ﻿— Придёшь на поляну ﻿— не будет
уше твоих нявок!#/$
  Сказал ﻿— и был таков!"

Джура шагает по лесу. Ветки над головой потрескивают, слышны шорохи, гулкие
окрики ﻿— то ли лесное зверьё шумит, то ли аука следит с веток за парубком.

Что-то бледное и худое пробегает мимо парня. Джура оборачивается. Огромный
дед появляется следом ﻿— заросший, бородатый, в меховой шубе ﻿— даром,
что лето.

﻿— Штой ждесь! ﻿— говорит.
 Парубок не успел и слово сказать, как дед скрылся за деревьями.

[Дальше](#чугайстер)
`;



чугайстер = () => `
 Стоит парубок, ждёт, что дальше-то будет.

 А дед тот из чащи выходит. Идёт, смеётся.

﻿— Ну, повежло тебе, ﻿— говорит, ﻿— што я тут околашивалшя. Мафка лешовая жа
тобой кралашь.

 И улыбается беззубым ртом.

Присмотрелся джура: не в шубе дед ﻿— нагой, все тело шерстью густой
заросло. Да и какой это дед? Чугайстер!

﻿— Спасибо, дядьку, ﻿— говорит парубок, ﻿— что спасли меня.
﻿— Да што мне твоё шпашибо, ﻿— говорит Чугайстер. ﻿— Давай лучше попляшем!

 А сам уже в ладоши хлопает да вокруг парня пританцовывает.

[Отказаться](#чугайстер_отказаться)

[Танцевать](#чугайстер_танцевать)
`;



чугайстер_танцевать = () => `
Стали они плясать на лесной поляне ﻿— джура шаг сделает, Чугайстер ﻿— десять,
джура раз обернётся ﻿— Чугайстер вихрем закрутится, да все в ладоши хлопает и
приговаривает:

﻿— Вот так, вот так! Мы и петь маштаки, и пляшать, и на шопилке играть!

Быстрее, быстрее танец идёт, Чугайстер уже ветром крутится вокруг парня.
Чувствует джура ﻿— выбился из сил, да как стоял ﻿— так на землю и рухнул.

﻿— Все, ﻿— говорит, ﻿— не могу. Дайте, дядьку, отдышаться!

﻿— Ну, шлавно потанчевали! ﻿— говорит Чугайстер. ﻿— Отблагодарить ли тебя как,
за то, што ражвлек меня?

[Дальше](#чугайстер_танцевать0)
`;



чугайстер_танцевать0 = () => `
﻿— Я #%чугайстер_просьба$ Поднялся джура и побрёл за Чугайстром.

[Дальше](#тропинка3)
`;



чугайстер_отказаться = () => `
﻿— Некогда мне ﻿— #%чугайстер_просьба$

[Дальше](#тропинка3)
`;

; Брод -----------------------------------------------------------------------


брод0 = () => `
статус_брод = 1
Вот и брод, о котором говорил домовой. А возле брода водяной лежит,
сохнет. Громадный, как вол. Пузо вывалил, глаза выпучил, весь в тине
и водорослях, рыбий хвост по земле стелется.

﻿— Здравствуй, хозяин вод, ﻿— говорит джура. ﻿— Позволишь ли перейти
через брод?

 Ударил водяной по воде хвостом, аж эхо пошло.

﻿— Ходят тут всякие, ﻿— говорит, ﻿— только раздражают. С чего мне тебя
пускать? Хочешь пройти ﻿— повесели меня! Отгадаешь три загадки ﻿— пущу,
а если нет ﻿— как знаешь, так и перебирайся!

﻿— А что ж не отгадать? Загадывай!

[Дальше](#mix_questions)
`;



_update_num = () => `
  question_#i$ = 1 + #question_#i$$
  if #question_#i$$ = #question_#i$-1$ then question_#i$ = #question_#i$$ + 0.5
  if question_#i$ >= count then question_#i$ = 0
`;




mix_questions = () => `
загадка = 1
num = 1
max_questions = 7

proc load_questions



mix_question_loop = () => `
  proc next_question
  if num < max_questions + 3 then num = num + 1 & goto mix_question_loop
goto брод_загадка
`;



next_next_question = () => `
question_#num$ = question_#num$ + 1
if question_#num$ >= count then question_#num$ = 0
i = 0
`;



next_question = () => `
question_#num$ = rnd#count$ ﻿— 1
i = 1
  :next_question_loop
  if i = num then end
  if question_#i$ = question_#num$ then proc next_next_question
  i = i + 1
  goto next_question_loop
`;



брод_загадка = () => `
if загадка_ответил>3 then goto конец_загадка
номер_загадки1 = "первую"
номер_загадки2 = "вторую"
номер_загадки3 = "третью"
номер_загадки4 = "четвертую"
номер_загадки5 = "пятую"
номер_загадки6 = "шестую"
номер_загадки7 = "седьмую"
﻿— Слушай мою #%номер_загадки#загадка$$ загадку: #/$
proc _question

[Ответить](#ответить)
if count_другую < 3 then
 [Попросить другую загадку](#другую)

[Назад](#подумать)
`;



подумать = () => `
﻿— Тут подумать надо, ﻿— говорит джура и назад поворачивает.
goto тропинка#статус_нявка$



другую = () => `
загадка = загадка + 1
if count_другую = 1 then
  ﻿— Трудная загадка, ﻿— произносит джура. ﻿— А нету полегче?
 & ﻿— И это ﻿— трудная? ﻿— говорит водяной. ﻿— Посмотрим, как ты с
 другой справишься! Но смотри мне ﻿— три раза уступлю, больше не
 проси!
if count_другую = 2 then
  ﻿— Хозяин вод, ты столько загадок знаешь, ﻿— произносит джура,
 ﻿— может, еще одну загадаешь?
 & ﻿— Так и быть, ﻿— говорит водяной. ﻿— Добрый я сегодня. Но будешь
 наглеть ﻿— кончится моя доброта!
if count_другую = 3 then
  ﻿— Какие загадки сложные! ﻿— произносит джура. ﻿— Да разве ж мне
 тягаться с тобой? Загадай такую, чтоб мне по уму была!
 & ﻿— Что-то не верится, ﻿— говорит водяной, ﻿— что есть такая
 загадка. Последний раз уступаю. Больше не проси!

[Дальше](#брод_загадка)
`;



брод1 = () => `
﻿— Ну что? ﻿— говорит водяной. ﻿— Готов отвечать?

[Готов](#брод_загадка)

[Не готов](#подумать)
if count_берегини_загадка then
[Передать слова берегинь](#конец_пропустил)

`;



load_questions = () => `
; Присвоить переменным загадки и отгадки
count = 16

вопрос_0 = "Детей кормит, а сама не ест."
вопрос_1 = "Семьсот соколят на одной подушке спят, да всё на солнце смотрят."
вопрос_2 = "Сидит баба на грядках, вся в жупанах и платках."
вопрос_3 = "Что достанет зубами затылок?"
вопрос_4 = "В воде водится, с хвостом родится, когда вырастает ﻿— хвост пропадает."
вопрос_5 = "Из земли явился, в воде родился, в огне крестился."
вопрос_6 = "Что то за бочка, что на четырёх ножках?#/$
    Снизу кормит, спереди колет, сзади подметает."
вопрос_7 = "Чем больше крутится, тем больше толстеет."
вопрос_8 = "Перья есть, а не летает, ног нету, а не догонишь."
вопрос_9 = "Течёт ﻿— и не вытечет, бежит ﻿— не убегает."
вопрос_10 = "Ехала пани в серебряном жупане, а на том жупане латка на латке."
вопрос_11 = "Ест и не насытится, а как воды попьёт ﻿— сразу умрёт."
вопрос_12 = "Кружок сыра на хате лежит. Собаки воют, достать не могут."
вопрос_13 = "В казанок чёрным, из казанка ﻿— красным."
вопрос_14 = "Летом в шубе, зимой в шапке."
вопрос_15 = "От хаты к хате идёт, а в дом не заходит."

ответ_ложка_0 = 1
ответ_подсолнух_1 = 1
ответ_семечки_1 = 1
ответ_семена_1 = 1
ответ_семки_1 = 1
ответ_капуста_2 = 1
ответ_гребешок_3 = 1
ответ_гребень_3 = 1
ответ_расческа_3 = 1
ответ_расчёска_3 = 1
ответ_жаба_4 = 1
ответ_лягушка_4 = 1
ответ_головастик_4 = 1
ответ_горшок_5 = 1
ответ_горшочек_5 = 1
ответ_макитра_5 = 1
ответ_кувшин_5 = 1
ответ_жбан_5 = 1
ответ_глечик_5 = 1
ответ_корова_6 = 1
ответ_говяда_6 = 1
ответ_коровка_6 = 1
ответ_веретено_7 = 1
ответ_рыба_8 = 1
ответ_речка_9 = 1
ответ_река_9 = 1
ответ_ручей_9 = 1
ответ_ручеёк_9 = 1
ответ_ручеек_9 = 1
ответ_рыба_10 = 1
ответ_огонь_11 = 1
ответ_костер_11 = 1
ответ_костёр_11 = 1
ответ_луна_12 = 1
ответ_месяц_12 = 1
ответ_рак_13 = 1
ответ_дерево_14 = 1
ответ_деревья_14 = 1
ответ_лес_14 = 1
ответ_тропа_15 = 1
ответ_тропинка_15 = 1
ответ_дорога_15 = 1
ответ_дорожка_15 = 1
`;



_question = () => `
  " #%вопрос_#question_#загадка$$$ "

`;



_answer = () => `
ответ = ""
Ответ:
if букв <= 0 then букв=0 & end
i = 0


_answer_loop = () => `
  ответ = ответ + ответ#i$
  i = i + 1
  if i < букв then goto _answer_loop
   #%ответ$

`;



ответить = () => `
букв = 0
  :ответить_loop
  cls
  proc _question
  proc _answer
  if error then ... какая-то закорючка непонятная: "#%error$".
  anykey char
  error = 0

  if (char_start0<=char and char<=char_end0) or
   (char_start1<=char and char<=char_end1) or
   (char_start2<=char and char<=char_end2) or
   (char_start3<=char and char<=char_end3) or
   (char_start4<=char and char<=char_end4) or
    char=char_more0 or
    char=char_more1 or
    char=char_more2 or
    char=char_more3 or
    char=char_more4 or
    char=char_more5 or
    char=char_more6 or
    char=char_more7
 then ответ#букв$ = char_#char$ & букв = букв + 1
 else error = char_#char$

  if char=8 then букв = букв ﻿— 1
  if char=27 then cls & goto брод_загадка
  if char<>13 and char<>32 then goto ответить_loop

if ответ_#%ответ$_#question_#загадка$$ then
﻿— Верно.
& загадка = загадка + 1
& загадка_ответил = загадка_ответил + 1
& [Дальше](#брод_загадка)
else
﻿— Неверно, ﻿— говорит водяной. ﻿— Может, ещё попробуешь?
& [Ещё вариант](#ответить)
& [Потом](#подумать)

`;



конец_загадка = () => `
 Старый казак усмехается ﻿— хорошая вышла история.

﻿— Пропустил водяной джуру, ﻿— говорит, ﻿— и уже к утру
парубок был на Сечи.

Старик поправляет густые белые усы. Люлька давно потухла, костёр
догорает. Парубки притихли, переглядываются.

﻿— Неужели так все и было? ﻿— говорит один.

﻿— Может и так, а может и по-другому. А для вас ﻿— наука: побеждай
трудности умом, а опасности ﻿— опытом.

`;



конец_пропустил = () => `
 Старый казак бросает хитрый взгляд ﻿— пожалуй, удался рассказ.

﻿— Сказал джура всё, что берегини говорили, ﻿— произносит он.
﻿— Поворчал водяной, да и пропустил парня ﻿— уже к утру парубок
был на Сечи. Вот и вся история.

Старик расправляет плечи, на лице появляется улыбка, видны редкие
жёлтые зубы.

﻿— И что, ﻿— говорит один из парубков, ﻿— на самом деле так все было?

﻿— Может и так, а может и по-другому. А для вас ﻿— наука: не стыдись
не знать, стыдись не спрашивать.

`;
; ----------------------------------------------------------------------------



Use_inv_Сохранить = () => `
save #%current_loc$
`;




common = () => `
cls
`;
